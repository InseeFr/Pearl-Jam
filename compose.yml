x-react-volumes: &react-volumes
  - ./:/opt/app

services:
  front:
    container_name: reactapp
    build:
      dockerfile: ./playwright-dev.Dockerfile
    hostname: front
    volumes: *react-volumes
    tty: true
    stdin_open: true # without this node doesn't start
    working_dir: /opt/app
    ipc: host
    ports:
      - 5173:5173 # use by vite
      - 8888:8888
    deploy:
      resources:
        limits:
          memory: 10g # Augmentez selon vos besoins
        reservations:
          memory: 8g
    environment:
      WATCHPACK_POLLING: true
      FAST_REFRESH: true
#
#  playwright-ui:
#    container_name: playwright-ui
#    image: mcr.microsoft.com/playwright:v1.49.1-jammy
#    hostname: playwright
#    volumes: *react-volumes
#    working_dir: /opt/app
#    entrypoint: npx playwright show-report --host 0.0.0.0
#    ports:
#      - 9323:9323
#npx playwright test --ui-port=8888 --ui-host=0.0.0.0
